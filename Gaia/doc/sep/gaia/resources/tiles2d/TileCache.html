<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="de">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Sun Feb 23 22:30:06 CET 2014 -->
<title>TileCache</title>
<meta name="date" content="2014-02-23">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TileCache";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TileCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../sep/gaia/resources/tiles2d/Style.SubServer.html" title="class in sep.gaia.resources.tiles2d"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../sep/gaia/resources/tiles2d/TileLoaderWorker.html" title="class in sep.gaia.resources.tiles2d"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?sep/gaia/resources/tiles2d/TileCache.html" target="_top">Frames</a></li>
<li><a href="TileCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">sep.gaia.resources.tiles2d</div>
<h2 title="Class TileCache" class="title">Class TileCache</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../sep/gaia/resources/Cache.html" title="class in sep.gaia.resources">sep.gaia.resources.Cache</a>&lt;<a href="../../../../sep/gaia/resources/tiles2d/TileResource.html" title="class in sep.gaia.resources.tiles2d">TileResource</a>&gt;</li>
<li>
<ul class="inheritance">
<li>sep.gaia.resources.tiles2d.TileCache</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">TileCache</span>
extends <a href="../../../../sep/gaia/resources/Cache.html" title="class in sep.gaia.resources">Cache</a>&lt;<a href="../../../../sep/gaia/resources/tiles2d/TileResource.html" title="class in sep.gaia.resources.tiles2d">TileResource</a>&gt;</pre>
<div class="block">This class is responsible for storing the <code>TileResource</code> objects
 on the hdd. How it performs this task is not visible for the other classes.
 
 The complexity of the caching strategy will maybe changing during later
 milestones.
 
 At this point, the strategy is planed as a mix of LRU (Least recently used)
 and LFU (Least frequently used).
 
 For each <code>Style</code> a directory will be created. The single
 <code>TileResource</code> files will be stored accoring to their coordinates.
 
 For example: <code>TileResource</code> tileA with <code>Style</code> styleB
 and coordinates x and y and zoom z. The file tree will loke like this:
 "styleA" |-> "z" -> "x" -> "y.gtr" "y.gtr" is the serialized
 <code>TileResource</code> object, "gtr" is the file ending and stands for
 "GAIA Tile Resource".</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Johannes Bauer (specification), Matthias Fisch (implementation)</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../sep/gaia/resources/tiles2d/TileCache.html#TileCache(sep.gaia.resources.tiles2d.TileManager, javax.media.opengl.GLProfile)">TileCache</a></strong>(<a href="../../../../sep/gaia/resources/tiles2d/TileManager.html" title="class in sep.gaia.resources.tiles2d">TileManager</a>&nbsp;manager,
         javax.media.opengl.GLProfile&nbsp;profile)</code>
<div class="block">Initializes the cache with the management-objects for the tiles to cache, as well
 as the OpenGL-profile to be used for loading the stored tiles texture-data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../sep/gaia/resources/tiles2d/TileCache.html#TileCache(sep.gaia.resources.tiles2d.TileManager, javax.media.opengl.GLProfile, long)">TileCache</a></strong>(<a href="../../../../sep/gaia/resources/tiles2d/TileManager.html" title="class in sep.gaia.resources.tiles2d">TileManager</a>&nbsp;manager,
         javax.media.opengl.GLProfile&nbsp;profile,
         long&nbsp;maximumSizeOnDisk)</code>
<div class="block">Initializes the cache with the management-objects for the tiles to cache, as well
 as the OpenGL-profile to be used for loading the stored tiles texture-data.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../sep/gaia/resources/tiles2d/TileCache.html#add(sep.gaia.resources.tiles2d.TileResource)">add</a></strong>(<a href="../../../../sep/gaia/resources/tiles2d/TileResource.html" title="class in sep.gaia.resources.tiles2d">TileResource</a>&nbsp;tile)</code>
<div class="block">Adds an tile to the cache and writes its image-data to a file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../sep/gaia/resources/tiles2d/TileCache.html#clear()">clear</a></strong>()</code>
<div class="block">Removes all entries from the cache.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../sep/gaia/resources/tiles2d/TileResource.html" title="class in sep.gaia.resources.tiles2d">TileResource</a></code></td>
<td class="colLast"><code><strong><a href="../../../../sep/gaia/resources/tiles2d/TileCache.html#get(java.lang.String)">get</a></strong>(java.lang.String&nbsp;key)</code>
<div class="block">Returns the element mapped to <code>key</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../sep/gaia/resources/tiles2d/TileCache.html#getCurrentSizeOnDisk()">getCurrentSizeOnDisk</a></strong>()</code>
<div class="block">Returns current size of the image-files of all styles in bytes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../sep/gaia/resources/tiles2d/TileCache.html#getMaximumSizeOnDisk()">getMaximumSizeOnDisk</a></strong>()</code>
<div class="block">Returns the maximum size of image-files of all styles in bytes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Collection&lt;sep.gaia.resources.Cache.CacheEntry&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../sep/gaia/resources/tiles2d/TileCache.html#manage()">manage</a></strong>()</code>
<div class="block">Checks if the maximum number of held resources is reached and deletes
 some of them according to the following removal-strategy: The lowest
 <code>REMOVE_LOWEST_PERC</code> of all resources with the lowest
 use-count will be removed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../sep/gaia/resources/tiles2d/TileCache.html#setMaximumSizeOnDisk(long)">setMaximumSizeOnDisk</a></strong>(long&nbsp;maximumSizeOnDisk)</code>
<div class="block">Sets the maximum size of image-files of all styles in bytes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../sep/gaia/resources/tiles2d/TileCache.html#writeBack()">writeBack</a></strong>()</code>
<div class="block">Writes the information about all cached tiles to a index-file.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_sep.gaia.resources.Cache">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;sep.gaia.resources.<a href="../../../../sep/gaia/resources/Cache.html" title="class in sep.gaia.resources">Cache</a></h3>
<code><a href="../../../../sep/gaia/resources/Cache.html#getAll(java.lang.String)">getAll</a>, <a href="../../../../sep/gaia/resources/Cache.html#getMaxEntries()">getMaxEntries</a>, <a href="../../../../sep/gaia/resources/Cache.html#setMaxEntries(int)">setMaxEntries</a>, <a href="../../../../sep/gaia/resources/Cache.html#size()">size</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TileCache(sep.gaia.resources.tiles2d.TileManager, javax.media.opengl.GLProfile)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TileCache</h4>
<pre>public&nbsp;TileCache(<a href="../../../../sep/gaia/resources/tiles2d/TileManager.html" title="class in sep.gaia.resources.tiles2d">TileManager</a>&nbsp;manager,
         javax.media.opengl.GLProfile&nbsp;profile)</pre>
<div class="block">Initializes the cache with the management-objects for the tiles to cache, as well
 as the OpenGL-profile to be used for loading the stored tiles texture-data.
 The maximum size of the cache on disk is set to maximum.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>manager</code> - The TileManager who holds the <code>TileLoader</code></dd><dd><code>profile</code> - The OpenGL-profile to use when creating texture-data.</dd></dl>
</li>
</ul>
<a name="TileCache(sep.gaia.resources.tiles2d.TileManager, javax.media.opengl.GLProfile, long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TileCache</h4>
<pre>public&nbsp;TileCache(<a href="../../../../sep/gaia/resources/tiles2d/TileManager.html" title="class in sep.gaia.resources.tiles2d">TileManager</a>&nbsp;manager,
         javax.media.opengl.GLProfile&nbsp;profile,
         long&nbsp;maximumSizeOnDisk)</pre>
<div class="block">Initializes the cache with the management-objects for the tiles to cache, as well
 as the OpenGL-profile to be used for loading the stored tiles texture-data.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>manager</code> - The TileManager who holds the <code>TileLoader</code></dd><dd><code>profile</code> - The OpenGL-profile to use when creating texture-data.</dd><dd><code>maximumSizeOnDisk</code> - The maximum size of image-files of all styles in bytes.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="get(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public&nbsp;<a href="../../../../sep/gaia/resources/tiles2d/TileResource.html" title="class in sep.gaia.resources.tiles2d">TileResource</a>&nbsp;get(java.lang.String&nbsp;key)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../sep/gaia/resources/Cache.html#get(java.lang.String)">Cache</a></code></strong></div>
<div class="block">Returns the element mapped to <code>key</code>. If a collection of resources
 was associated with the key only the first will be returned. In this case use
 <code>getAll()</code> to get the whole collection.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../sep/gaia/resources/Cache.html#get(java.lang.String)">get</a></code>&nbsp;in class&nbsp;<code><a href="../../../../sep/gaia/resources/Cache.html" title="class in sep.gaia.resources">Cache</a>&lt;<a href="../../../../sep/gaia/resources/tiles2d/TileResource.html" title="class in sep.gaia.resources.tiles2d">TileResource</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key the resource is mapped to.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The resource mapped to <code>key</code> or <code>null</code> if there is
 none.</dd></dl>
</li>
</ul>
<a name="add(sep.gaia.resources.tiles2d.TileResource)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>public&nbsp;boolean&nbsp;add(<a href="../../../../sep/gaia/resources/tiles2d/TileResource.html" title="class in sep.gaia.resources.tiles2d">TileResource</a>&nbsp;tile)</pre>
<div class="block">Adds an tile to the cache and writes its image-data to a file.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../sep/gaia/resources/Cache.html#add(R)">add</a></code>&nbsp;in class&nbsp;<code><a href="../../../../sep/gaia/resources/Cache.html" title="class in sep.gaia.resources">Cache</a>&lt;<a href="../../../../sep/gaia/resources/tiles2d/TileResource.html" title="class in sep.gaia.resources.tiles2d">TileResource</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>tile</code> - The tile to be cached.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if <code>tile</code> was successfully added or already present.
 <code>false</code> otherwise.</dd></dl>
</li>
</ul>
<a name="manage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>manage</h4>
<pre>public&nbsp;java.util.Collection&lt;sep.gaia.resources.Cache.CacheEntry&gt;&nbsp;manage()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../sep/gaia/resources/Cache.html#manage()">Cache</a></code></strong></div>
<div class="block">Checks if the maximum number of held resources is reached and deletes
 some of them according to the following removal-strategy: The lowest
 <code>REMOVE_LOWEST_PERC</code> of all resources with the lowest
 use-count will be removed. If there are entries with the same use-count
 the average timestamp of all resources contained in the entry will be
 used.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A collection of all the entries removed from cache.</dd></dl>
</li>
</ul>
<a name="writeBack()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeBack</h4>
<pre>public&nbsp;void&nbsp;writeBack()</pre>
<div class="block">Writes the information about all cached tiles to a index-file.
 For the format of the file see tilecache.xsd.</div>
</li>
</ul>
<a name="clear()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;clear()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../sep/gaia/resources/Cache.html#clear()">Cache</a></code></strong></div>
<div class="block">Removes all entries from the cache.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../sep/gaia/resources/Cache.html#clear()">clear</a></code>&nbsp;in class&nbsp;<code><a href="../../../../sep/gaia/resources/Cache.html" title="class in sep.gaia.resources">Cache</a>&lt;<a href="../../../../sep/gaia/resources/tiles2d/TileResource.html" title="class in sep.gaia.resources.tiles2d">TileResource</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="getMaximumSizeOnDisk()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaximumSizeOnDisk</h4>
<pre>public&nbsp;long&nbsp;getMaximumSizeOnDisk()</pre>
<div class="block">Returns the maximum size of image-files of all styles in bytes.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The maximum size of image-files of all styles in bytes.</dd></dl>
</li>
</ul>
<a name="setMaximumSizeOnDisk(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaximumSizeOnDisk</h4>
<pre>public&nbsp;void&nbsp;setMaximumSizeOnDisk(long&nbsp;maximumSizeOnDisk)</pre>
<div class="block">Sets the maximum size of image-files of all styles in bytes.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>maximumSizeOnDisk</code> - The maximum size of image-files of all styles in bytes.</dd></dl>
</li>
</ul>
<a name="getCurrentSizeOnDisk()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getCurrentSizeOnDisk</h4>
<pre>public&nbsp;long&nbsp;getCurrentSizeOnDisk()</pre>
<div class="block">Returns current size of the image-files of all styles in bytes.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The current size of the image-files of all styles in bytes.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TileCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../sep/gaia/resources/tiles2d/Style.SubServer.html" title="class in sep.gaia.resources.tiles2d"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../sep/gaia/resources/tiles2d/TileLoaderWorker.html" title="class in sep.gaia.resources.tiles2d"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?sep/gaia/resources/tiles2d/TileCache.html" target="_top">Frames</a></li>
<li><a href="TileCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
